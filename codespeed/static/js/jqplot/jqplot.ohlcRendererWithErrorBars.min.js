!function(t){t.jqplot.OHLCRenderer=function(){t.jqplot.LineRenderer.call(this),this.candleStick=!1,this.tickLength="auto",this.bodyWidth="auto",this.openColor=null,this.closeColor=null,this.wickColor=null,this.fillUpBody=!1,this.fillDownBody=!0,this.upBodyColor=null,this.downBodyColor=null,this.hlc=!1,this.lineWidth=1.5,this._tickLength,this._bodyWidth},t.jqplot.OHLCRenderer.prototype=new t.jqplot.LineRenderer,t.jqplot.OHLCRenderer.prototype.constructor=t.jqplot.OHLCRenderer,t.jqplot.OHLCRenderer.prototype.init=function(o){o=o||{},this.lineWidth=o.lineWidth||1.5,t.jqplot.LineRenderer.prototype.init.call(this,o),this._type="ohlc";var e=this._yaxis._dataBounds,r=this._plotData;if(r[0].length<5){this.renderer.hlc=!0;for(var i=0;i<r.length;i++)(r[i][2]<e.min||null==e.min)&&(e.min=r[i][2]),(r[i][1]>e.max||null==e.max)&&(e.max=r[i][1])}else for(var i=0;i<r.length;i++)(r[i][3]<e.min||null==e.min)&&(e.min=r[i][3]),(r[i][2]>e.max||null==e.max)&&(e.max=r[i][2])},t.jqplot.OHLCRenderer.prototype.draw=function(o,e,r){var i,l,d,n,h,s,a,c,p,y=this.data,w=this._xaxis.min,k=this._xaxis.max,C=0,u=y.length,g=this._xaxis.series_u2p,_=this._yaxis.series_u2p,f=this.renderer,R=void 0!=r?r:{};void 0!=R.shadow?R.shadow:this.shadow,void 0!=R.fill?R.fill:this.fill,void 0!=R.fillAndStroke?R.fillAndStroke:this.fillAndStroke;if(f.bodyWidth=void 0!=R.bodyWidth?R.bodyWidth:f.bodyWidth,f.tickLength=void 0!=R.tickLength?R.tickLength:f.tickLength,o.save(),this.show){for(var L,x,v,m,B,i=0;i<y.length;i++)y[i][0]<w?C=i:y[i][0]<k&&(u=i+1);var b=this.gridData[u-1][0]-this.gridData[C][0],W=u-C;try{var j=Math.abs(this._xaxis.series_u2p(parseInt(this._xaxis._intervalStats[0].sortedIntervals[0].interval,10))-this._xaxis.series_u2p(0))}catch(q){var j=b/W}f.candleStick?"number"==typeof f.bodyWidth?f._bodyWidth=f.bodyWidth:f._bodyWidth=Math.min(20,j/1.65):"number"==typeof f.tickLength?f._tickLength=f.tickLength:f._tickLength=Math.min(10,j/3.5);for(var i=C;u>i;i++)L=g(y[i][0]),f.hlc?(x=null,v=_(y[i][1]),m=_(y[i][2]),B=_(y[i][3])):(x=_(y[i][1]),v=_(y[i][2]),m=_(y[i][3]),B=_(y[i][4])),p={},f.candleStick&&!f.hlc?(s=f._bodyWidth,a=L-s/2,x>B?(f.wickColor?p.color=f.wickColor:f.downBodyColor&&(p.color=f.upBodyColor),d=t.extend(!0,{},R,p),f.shapeRenderer.draw(o,[[L,v],[L,B]],d),f.shapeRenderer.draw(o,[[L,x],[L,m]],d),p={},n=B,h=x-B,f.fillUpBody?p.fillRect=!0:(p.strokeRect=!0,s-=this.lineWidth,a=L-s/2),f.upBodyColor&&(p.color=f.upBodyColor,p.fillStyle=f.upBodyColor),c=[a,n,s,h]):B>x?(f.wickColor?p.color=f.wickColor:f.downBodyColor&&(p.color=f.downBodyColor),d=t.extend(!0,{},R,p),f.shapeRenderer.draw(o,[[L,v],[L,x]],d),f.shapeRenderer.draw(o,[[L,B],[L,m]],d),p={},n=x,h=B-x,f.fillDownBody?p.fillRect=!0:(p.strokeRect=!0,s-=this.lineWidth,a=L-s/2),f.downBodyColor&&(p.color=f.downBodyColor,p.fillStyle=f.downBodyColor),c=[a,n,s,h]):(f.wickColor&&(p.color=f.wickColor),d=t.extend(!0,{},R,p),f.shapeRenderer.draw(o,[[L,v],[L,m]],d),p={},p.fillRect=!1,p.strokeRect=!1,a=[L-s/2,x],n=[L+s/2,B],s=null,h=null,c=[a,n]),d=t.extend(!0,{},R,p),f.shapeRenderer.draw(o,c,d)):f.errorBar?(l=R.color,f.openColor&&(R.color=f.openColor),R.color=l,f.wickColor&&(R.color=f.wickColor),f.shapeRenderer.draw(o,[[L,v],[L,m]],R),R.color=l,f.shapeRenderer.draw(o,[[L+f._tickLength/2,v],[L-f._tickLength/2,v]],R),f.shapeRenderer.draw(o,[[L+f._tickLength/2,m],[L-f._tickLength/2,m]],R),R.fillRect=!0,f.shapeRenderer.draw(o,[Math.round(L-f._tickLength/4),Math.round(B-f._tickLength/4),f._tickLength/2,f._tickLength/2],R),R.color=l,R.fillRect=!1):(l=R.color,f.openColor&&(R.color=f.openColor),f.hlc||f.shapeRenderer.draw(o,[[L-f._tickLength,x],[L,x]],R),R.color=l,f.wickColor&&(R.color=f.wickColor),f.shapeRenderer.draw(o,[[L,v],[L,m]],R),R.color=l,f.closeColor&&(R.color=f.closeColor),f.shapeRenderer.draw(o,[[L,B],[L+f._tickLength,B]],R),R.color=l)}o.restore()},t.jqplot.OHLCRenderer.prototype.drawShadow=function(t,o,e){},t.jqplot.OHLCRenderer.checkOptions=function(t,o,e){e.highlighter||(e.highlighter={showMarker:!1,tooltipAxes:"y",yvalues:4,formatString:'<table class="jqplot-highlighter"><tr><td>date:</td><td>%s</td></tr><tr><td>open:</td><td>%s</td></tr><tr><td>hi:</td><td>%s</td></tr><tr><td>low:</td><td>%s</td></tr><tr><td>close:</td><td>%s</td></tr></table>'})}}(jQuery);